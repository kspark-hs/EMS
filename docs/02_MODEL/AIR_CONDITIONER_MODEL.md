# AIR_CONDITIONER_MODEL.md

본 문서는 EMS에서 제어·표시하는 **에어컨 모델의 역할, 제어 정책, UI 표현 기준**을 정의한다.  
본 문서는 Service / Provider / Scheduler / UI 구현의 **단일 기준 문서**로 사용된다.

---

## 1. 에어컨의 역할

- 배터리 룸의 **온도·습도 조절을 위한 보조 제어 설비**
- 배터리 보호 및 환경 안정화를 목적
- **충·방전 판단의 직접 기준 장비는 아님**

---

## 2. 제어 모드

### 2.1 AUTO (자동)

- EMS가 온습도계 값을 참조하여 자동 제어
- 제어 대상
    - 냉방 / 난방 / 제습
    - 설정 온도
    - 풍량
- AUTO 상태에서만 Scheduler가 제어 개입 가능

표시 예:
- `자동(온습도)`

---

### 2.2 MANUAL (수동)

- 엔지니어 또는 현장 조작에 의해 설정된 상태 유지
- EMS / Scheduler는 **절대 개입하지 않음**
- 다음 경우를 모두 포함
    - 원격 수동 설정
    - 현장 직접 조작

표시 예:
- `수동`

---

## 3. 운전 모드 (Operation Mode)

- 에어컨은 다음 운전 모드를 가질 수 있다
    - 냉방 (COOL)
    - 난방 (HEAT)
    - 제습 (DRY)
    - 송풍 (FAN)
    - 정지 (STOP)

### 혼합 운전 허용

- 동일 발전소 내에서
    - 냉방 / 난방 **혼합 운전 가능**
- 이는 다음 목적을 위한 **정상 운전 상태**이다
    - 결로 방지
    - 단열 불균형 대응
    - 랙 국부 발열 대응

⚠️ 혼합 운전은 **고장·경고·이상 상태가 아니다**

---

## 4. 충·방전과의 관계

- 에어컨 상태는 **충·방전 판단에 직접 사용되지 않는다**
- 충·방전 판단 기준은 다음 문서를 따른다
    - `ENVIRONMENT_POLICY.md`
    - `TEMPERATURE_HUMIDITY_MODEL.md`

---

## 5. UI 표현 원칙

### 5.1 요약 카드 (Summary Card)

- **선택된 에어컨 1대 기준으로 표시**
- 표시 항목
    - 상태 (정상 / 경고 / 고장 / 단절)
    - 제어 (자동 / 수동)
    - 운전
        - 예) `냉방 / 26℃ / 중풍`
        - 예) `난방 / 22℃ / 약풍`
    - 통신 (정상 / 단절)

❌ 다음 문구는 요약 카드에서 표시하지 않는다
- `냉방 n대 운전 중`
- `혼합 운전 중` 등 전체 집계 문구

---

### 5.2 상세 테이블 (Detail Table)

- 에어컨 n대 **전체 Row 표시**
- 각 Row는 독립적인 상태를 가진다
- MANUAL / AUTO 상태는 반드시 Row 단위로 표시

예시:

| ID | 상태 | 제어 | 운전 | 통신 |
|----|------|------|------|------|
| 1  | 정상 | 수동 | 냉방 / 26℃ / 중풍 | 정상 |
| 2  | 정상 | 자동(온습도) | 난방 / 22℃ / 약풍 | 정상 |
| 3  | 단절 | - | - | 단절 |

---

## 6. 구현 책임 분리

- Provider
    - 에어컨 원시 상태 제공
- Service
    - 상태 해석 및 View DTO 구성
- Scheduler
    - AUTO 상태에서만 제어 수행
- UI
    - 본 문서 기준에 따른 표현만 수행

본 문서와 상충하는 구현은 허용하지 않는다.
