<div xmlns:th="http://www.thymeleaf.org"
     th:fragment="airConditionerCard"
     class="bg-white rounded-xl shadow p-4 min-h-[180px]">

    <!-- =========================
         Ïπ¥Îìú Ìó§Îçî
    ========================= -->
    <div class="flex items-center justify-between pb-2 mb-3 border-b border-gray-200">

        <!-- Ï¢åÏ∏° : ÏïÑÏù¥ÏΩò + Ï†úÎ™© -->
        <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-green-500"></span>
            <h2 class="font-semibold text-gray-700">ÏóêÏñ¥Ïª®</h2>
        </div>

        <!-- Ïö∞Ï∏° : ÏÉÅÏÑ∏ Î≤ÑÌäº + ÏóêÏñ¥Ïª® ÏÑ†ÌÉù -->
        <div class="flex items-center gap-2">

            <!-- üîπ ÏÉÅÏÑ∏ Î≤ÑÌäº -->
            <button type="button"
                    class="text-xs text-blue-600 border border-blue-300 rounded px-2 py-1 hover:bg-blue-50"
                    onclick="toggleAirConditionerDetail(this)">
                ÏÉÅÏÑ∏
            </button>

            <!-- üîπ ÏóêÏñ¥Ïª® ÏÑ†ÌÉù -->
            <form method="get" th:action="@{/individual/battery}">
                <select name="airConditionerId"
                        class="text-xs border border-gray-300 rounded px-2 py-1
                               focus:outline-none focus:ring-1 focus:ring-blue-400"
                        onchange="this.form.submit()">

                    <option th:each="ac, stat : ${airConditionerList}"
                            th:value="${ac.acId}"
                            th:text="'ÏóêÏñ¥Ïª® #' + ${stat.index + 1}"
                            th:selected="${ac.acId == selectedAirConditionerId}">
                    </option>

                </select>
            </form>
        </div>
    </div>


    <!-- =========================
         Ïπ¥Îìú Î≥∏Î¨∏ (ÏöîÏïΩ Row = rows[0])
    ========================= -->
    <div class="text-sm text-gray-700"
         th:if="${airConditionerStatusTable != null
                 and airConditionerStatusTable.rows != null
                 and !airConditionerStatusTable.rows.isEmpty()}">

        <th:block th:with="row=${airConditionerStatusTable.rows[0]}">

            <!-- ÏÉÅÌÉú -->
            <div class="flex justify-between py-1">
                <span>ÏÉÅÌÉú</span>
                <span class="font-semibold"
                      th:text="${row.healthStatusText}"
                      th:classappend="' ' + ${row.healthStatusClass}">
                </span>
            </div>

            <!-- Ï†úÏñ¥ -->
            <div class="flex justify-between py-1">
                <span>Ï†úÏñ¥</span>
                <span th:utext="${row.controlSummaryText}">
                    ÏûêÎèô<br/>(Ïò®ÏäµÎèÑ)
                </span>
            </div>

            <!-- ‚úÖ AUTO Ï†úÏñ¥ Î≥¥Ï°∞ Î¨∏Íµ¨ (Ï†úÏñ¥ Î∞îÎ°ú ÏïÑÎûò) -->
            <p th:if="${row.controlSubText != null}"
               class="text-xs text-gray-500 ml-14 mt-1"
               th:text="${row.controlSubText}">
            </p>

            <!-- Ïö¥Ï†Ñ -->
            <div class="flex justify-between py-1">
                <span>Ïö¥Ï†Ñ</span>
                <span th:text="${row.operationSummaryText}">
                    ÎÉâÎ∞© / 24‚ÑÉ / Ï§ëÌíç
                </span>
            </div>

            <!-- ÌÜµÏã† -->
            <div class="flex justify-between py-1">
                <span>ÌÜµÏã†</span>
                <span class="font-semibold"
                      th:text="${row.online ? 'Ï†ïÏÉÅ' : 'Îã®Ï†à'}"
                      th:classappend="${row.online}
                            ? ' text-green-600'
                            : ' text-red-600'">
                </span>
            </div>

        </th:block>
    </div>


    <!-- ÏóêÏñ¥Ïª® ÏÉÅÏÑ∏ (Íµ¨Ï°∞Îßå Ïú†ÏßÄ, ÎÇ¥Ïö©ÏùÄ Ï∂îÌõÑ Íµ¨ÌòÑ) -->
    <div class="air-conditioner-detail hidden mt-3">
        <div th:replace="~{
            fragment/equipment/air-conditioner-detail-card
            :: airConditionerDetailCard
        }"></div>
    </div>

</div>
