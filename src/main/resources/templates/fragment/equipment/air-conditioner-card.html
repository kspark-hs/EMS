<div xmlns:th="http://www.thymeleaf.org"
     th:fragment="airConditionerCard"
     class="bg-white rounded-xl shadow p-4 min-h-[180px]">

    <!-- =========================================
         에어컨 상태 카드 (최종본)
         - DTO 단일 바인딩
         - 색상/굵기 규칙 통일
         - LG / AirMajor Provider 확장 대응
    ========================================= -->

    <!-- 카드 헤더 -->
    <div class="flex items-center justify-between pb-2 mb-3 border-b border-gray-200">
        <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-cyan-500"></span>
            <h2 class="font-semibold text-gray-700">에어컨</h2>
        </div>

        <!-- 에어컨 선택 -->
        <form method="get" th:action="@{/individual/battery}">
            <select name="airConditionerId"
                    class="border rounded px-2 py-1 text-xs h-7 bg-white"
                    onchange="this.form.submit()">

                <option th:each="ac : ${airConditionerList}"
                        th:value="${ac.acId}"
                        th:selected="${ac.acId == selectedAirConditionerId}"
                        th:text="${ac.acId}">
                </option>

            </select>
        </form>
    </div>

    <!-- 카드 본문 -->
    <div class="text-sm text-gray-700 space-y-1">

        <!-- 상태 -->
        <div class="flex justify-between">
            <span>상태</span>
            <span class="font-semibold"
                  th:text="${airConditioner.operationStatusText}"
                  th:classappend="
                      ${airConditioner.communicationOk}
                      ? ' text-green-600'
                      : ' text-red-600'
                  ">
                정상 운전 중
            </span>
        </div>

        <!-- 운전 모드 -->
        <div class="flex justify-between">
            <span>운전 모드</span>
            <span th:text="${airConditioner.operationMode}">COOL</span>
        </div>

        <!-- 제어 방식 -->
        <div class="flex justify-between">
            <span>제어 방식</span>
            <span th:text="${airConditioner.controlMode}">AUTO</span>
        </div>

        <!-- 설정 온도 -->
        <div class="flex justify-between">
            <span>설정 온도</span>
            <span>
                <span class="font-semibold"
                      th:text="${airConditioner.setTemp}">25</span>
                <span> ℃</span>
            </span>
        </div>

        <!-- 풍량 -->
        <div class="flex justify-between">
            <span>풍량</span>
            <span th:text="${airConditioner.fanSpeed}">AUTO</span>
        </div>

        <!-- EMS 대응 상태 -->
        <div class="pt-2 font-semibold">

            <!-- 능동대응 -->
            <span th:if="${airConditioner.responseState == '능동대응'}"
                  class="text-green-600">
                능동대응
            </span>

            <!-- 수동 유지 -->
            <span th:if="${airConditioner.responseState == '수동유지'}"
                  class="text-gray-600">
                수동 유지
            </span>

            <!-- 복구 대응 -->
            <span th:if="${airConditioner.responseState == '복구대응'}"
                  class="text-red-600">
                복구대응
            </span>

        </div>

    </div>

</div>
