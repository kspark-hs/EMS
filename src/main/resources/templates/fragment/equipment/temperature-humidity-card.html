<div xmlns:th="http://www.thymeleaf.org"
     th:fragment="temperatureHumidityCard"
     class="bg-white rounded-xl shadow p-4 min-h-[180px]">

    <!-- =========================
     Ïπ¥Îìú Ìó§Îçî
========================= -->
    <div class="flex items-center justify-between pb-2 mb-3 border-b border-gray-200">

        <!-- Ï¢åÏ∏° : ÏïÑÏù¥ÏΩò + Ï†úÎ™© -->
        <div class="flex items-center gap-2">
            <span class="w-2 h-2 rounded-full bg-sky-500"></span>
            <h2 class="font-semibold text-gray-700">Ïò®ÏäµÎèÑÍ≥Ñ</h2>
        </div>

        <!-- Ïö∞Ï∏° : ÏÉÅÏÑ∏ Î≤ÑÌäº + Device Select -->
        <div class="flex items-center gap-2">

            <!-- üîπ ÏÉÅÏÑ∏ Î≤ÑÌäº -->
            <button type="button"
                    class="text-xs text-blue-600 border border-blue-300 rounded px-2 py-1 hover:bg-blue-50"
                    onclick="toggleTemperatureHumidityDetail(this)">
                ÏÉÅÏÑ∏
            </button>

            <!-- üîπ Ïò®ÏäµÎèÑÍ≥Ñ Device ÏÑ†ÌÉù -->
            <form method="get" th:action="@{/individual/battery}">
                <select name="sensorNo"
                        class="text-xs border border-gray-300 rounded px-2 py-1
                           focus:outline-none focus:ring-1 focus:ring-blue-400"
                        onchange="this.form.submit()">

                    <option th:each="no : ${temperatureHumiditySensorOptions}"
                            th:value="${no}"
                            th:text="'Ïò®ÏäµÎèÑÍ≥Ñ #' + ${no}"
                            th:selected="${no == selectedSensorNo}">
                    </option>

                </select>
            </form>
        </div>
    </div>


    <!-- =========================
         Ïπ¥Îìú Î≥∏Î¨∏ (ÎåÄÌëú ÏÑºÏÑú = rows[0])
    ========================= -->
    <div class="text-sm text-gray-700"
         th:if="${temperatureHumidityTable != null}">


    <!-- ÏÉÅÌÉú -->
        <div class="flex justify-between py-1">
            <span>ÏÉÅÌÉú</span>
            <span class="font-semibold"
                  th:text="${temperatureHumidityTable.overallStatusText}"
                  th:classappend="${temperatureHumidityTable.overallStatus.name() == 'NORMAL'}
                        ? ' text-green-600'
                        : ' text-red-600'">
            </span>
        </div>

        <!-- Ïò®ÎèÑ (ÎåÄÌëú ÏÑºÏÑú Í∏∞Ï§Ä) -->
        <div class="flex justify-between py-1">
            <span>Ïò®ÎèÑ</span>
            <span>
                <span class="font-semibold"
                      th:text="${@fmt.temp(temperatureHumidityTable.tempMax)}">25.0</span> ‚ÑÉ
            </span>
        </div>

        <!-- ÏäµÎèÑ (ÎåÄÌëú ÏÑºÏÑú Í∏∞Ï§Ä) -->
        <div class="flex justify-between py-1">
            <span>ÏäµÎèÑ</span>
            <span>
                <span class="font-semibold"
                      th:text="${@fmt.hum(temperatureHumidityTable.humidityMax)}">60.0</span> %
            </span>
        </div>

        <!-- Ï∂©Î∞©Ï†Ñ Í∞ÄÎä• Ïó¨Î∂Ä -->
        <div class="py-1">
            <span class="font-semibold"
                  th:text="${temperatureHumidityTable.operableText}"
                  th:classappend="${temperatureHumidityTable.operable}
                        ? ' text-green-600'
                        : ' text-red-600'">
            </span>
        </div>

        <!-- Í∏∞Ï§Ä Î¨∏Íµ¨ -->
        <div class="pt-1 text-xs text-gray-400">
            (Í∏∞Ï§Ä:
            Ïò®ÎèÑ
            <span th:text="${@fmt.temp(temperatureHumidityTable.Í∏∞Ï§ÄÏò®ÎèÑMin)}"></span>
            ~
            <span th:text="${@fmt.temp(temperatureHumidityTable.Í∏∞Ï§ÄÏò®ÎèÑMax)}"></span>
            ‚ÑÉ
            /
            ÏäµÎèÑ ‚â§
            <span th:text="${temperatureHumidityTable.Í∏∞Ï§ÄÏäµÎèÑMax}"></span>
            %
            )
        </div>
    </div>

    <!-- =========================
     Ïò®ÏäµÎèÑÍ≥Ñ ÏÉÅÏÑ∏ (Ï¥àÍ∏∞ Ïà®ÍπÄ)
    ========================= -->
    <div class="temperature-humidity-detail hidden mt-3">
        <div th:replace="~{
            fragment/equipment/temperature-humidity-detail-card
            :: temperatureHumidityDetailCard
        }"></div>
    </div>

</div>

