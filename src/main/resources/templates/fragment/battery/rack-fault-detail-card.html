<div id="rack-fault"
     th:fragment="rackFaultDetailCard"
     class="bg-white rounded-xl shadow p-4">

    <!-- 카드 헤더 -->
    <div class="flex items-center justify-between pb-2 mb-3 border-b border-gray-200">

        <div class="flex items-center gap-2">
            <span class="inline-block w-2 h-2 rounded-full bg-red-500"></span>
            <h3 class="font-semibold text-gray-800">Rack 고장정보</h3>
        </div>

        <form method="get" th:action="@{/individual/battery}">
            <input type="hidden" name="batteryNo" th:value="${batteryNo}"/>

            <select name="rackNo"
                    class="border rounded px-2 py-1 text-sm bg-white"
                    onchange="this.form.submit()">
                <option th:each="no : ${rackOptions}"
                        th:value="${no}"
                        th:text="'Rack #' + ${no}"
                        th:selected="${no == selectedRackNo}">
                </option>
            </select>
        </form>
    </div>

    <!-- PCS와 동일 grid -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-3 text-sm">

        <div th:each="item : ${rackFaultItems}"
             class="flex items-center gap-2 min-h-[24px]">

            <!-- 상태 블릿 -->
            <span class="inline-block w-2 h-2 rounded-full"
                  th:classappend="${item.occurred}
                        ? 'bg-red-500'
                        : 'bg-gray-300'">
            </span>

            <!-- 고장 명칭 -->
            <span th:text="${item.faultName}"
                  class="leading-none"
                  th:classappend="${item.occurred}
                        ? 'text-red-600 font-semibold'
                        : 'text-gray-600'">
            </span>
        </div>

    </div>
</div>
